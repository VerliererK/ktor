{"version":3,"sources":["components/Input.js","components/DownloadItem.js","screens/Downloads.js"],"names":["Input","label","wrapperClass","labelProps","onChange","id","props","className","htmlFor","e","target","value","defaultProps","type","text","console","log","DownloadItem","torrent","useState","stopping","setStopping","style","opacity","lineBreak","marginRight","name","done","redableTimeRemaining","progress","height","width","backgroundColor","status","total","downloaded","speed","disabled","onClick","fetch","magnetURI","href","downloadLink","Downloads","useSWR","then","res","json","refreshInterval","data","error","link","setLink","adding","setAdding","addingError","setAddingError","add","a","preventDefault","indexOf","paddingLeft","onSubmit","placeholder","required","torrents","map"],"mappings":"0OAGA,SAASA,EAAT,GAA6E,IAA5DC,EAA2D,EAA3DA,MAAmBC,GAAwC,EAApDC,WAAoD,EAAxCD,cAAcE,EAA0B,EAA1BA,SAAUC,EAAgB,EAAhBA,GAAOC,EAAS,iBAC1E,OACE,sBAAKC,UAAS,qBAAgBL,GAA8B,IAA5D,UACE,uBAAOM,QAASH,EAAhB,SAAqBJ,IACrB,mCAAOM,UAAU,eAAeF,GAAIA,EAAID,SAAU,SAAAK,GAAC,OAAIL,EAASK,EAAEC,OAAOC,SAAYL,OAK3FN,EAAMY,aAAe,CACnBC,KAAM,OACNT,SAAU,SAAAU,GAAI,OAAIC,QAAQC,IAAI,UAAWF,KAkB5Bd,QC8BAiB,MA5Df,YAAoC,IAAZC,EAAW,EAAXA,QACtB,EAAgCC,oBAAS,GAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KAYA,OACE,sBAAKd,UAAU,OAAOe,MAAO,CAAEC,QAASH,EAAW,IAAO,GAA1D,UACE,sBAAKb,UAAU,2CAAf,UACE,oBAAIe,MAAO,CAAEE,UAAW,WAAYC,YAAa,OAAjD,SAA2DP,EAAQQ,OACnE,qBAAKnB,UAAU,wBAAf,SAAwCW,EAAQS,KAAO,OAAST,EAAQU,0BAEpD,MAArBV,EAAQW,UACP,qBACEP,MAAO,CACLQ,OAAQ,MACRC,MAAM,GAAD,OAAKb,EAAQW,SAAb,KACLG,gBAAiB,oBAIvB,sBAAKzB,UAAU,oBAAf,UACE,sBAAKA,UAAU,uBAAf,UACE,qBAAKA,UAAU,WAAf,sBACA,8BAAMW,EAAQe,YAEhB,sBAAK1B,UAAU,uBAAf,UACE,qBAAKA,UAAU,WAAf,oBACA,8BAAMW,EAAQgB,WAEhB,sBAAK3B,UAAU,uBAAf,UACE,qBAAKA,UAAU,WAAf,0BACA,8BAAMW,EAAQiB,gBAEhB,sBAAK5B,UAAU,uBAAf,UACE,qBAAKA,UAAU,WAAf,qBACA,8BAAMW,EAAQkB,YAEdlB,EAAQS,MACR,wBAAQU,SAAUjB,EAAUb,UAAU,aAAa+B,QA3C9C,WACXjB,GAAY,GAEZ,IACEkB,MAAM,iCAAD,OAAkCrB,EAAQsB,YAC/C,MAAO/B,GACPM,QAAQC,IAAIP,KAqCR,kBAIDS,EAAQS,MACP,mBAAGc,KAAMvB,EAAQwB,aAAcnC,UAAU,cAAzC,yBCaKoC,UA7Df,WACE,IACA,EAAwBC,YAAO,wBADf,kBAAaL,MAAK,WAAL,aAAeM,MAAK,SAAAC,GAAG,OAAIA,EAAIC,YACI,CAAEC,gBAAiB,MAA3EC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,MACd,EAAwB/B,mBAAS,IAAjC,mBAAOgC,EAAP,KAAaC,EAAb,KACA,EAA4BjC,oBAAS,GAArC,mBAAOkC,EAAP,KAAeC,EAAf,KACA,EAAsCnC,mBAAS,IAA/C,mBAAOoC,EAAP,KAAoBC,EAApB,KAEMC,EAAG,uCAAG,WAAMhD,GAAN,SAAAiD,EAAA,yDACNjD,GAAGA,EAAEkD,iBACTL,GAAU,GAEsB,IAA5BH,EAAKS,QAAQ,WAJP,gBAKRJ,EAAe,6BALP,8BAORA,EAAe,IAPP,SAQWjB,MAAM,8BAAD,OAA+BY,IAR/C,OAUY,MAVZ,OAUClB,OACPmB,EAAQ,IAERI,EAAe,oBAbT,QAiBVF,GAAU,GAjBA,4CAAH,sDAoBT,OACE,qCACE,2CACE,mBAAG/C,UAAU,KAAKe,MAAO,CAAEuC,YAAa,IAAMpB,KAAK,aAAnD,SACE,0BAAUf,KAAK,wBAInB,uBAAMoC,SAAUL,EAAhB,UACE,cAAC,EAAD,CACEpD,GAAG,OACHqB,KAAK,OACLqC,YAAY,cACZpD,MAAOwC,EACP/C,SAAUgD,EACVY,UAAQ,IAEO,KAAhBT,GAAsB,qBAAKhD,UAAU,cAAf,SAA8BgD,IACrD,wBAAQlB,SAAUgB,EAAQ9C,UAAS,qBAAgB8C,EAAS,WAAa,IAAMxC,KAAK,SAApF,oBAIDqC,GAAS,qBAAK3C,UAAU,mBAAf,oDACT0C,GACC,qBAAK1C,UAAU,qBAAf,SACG0C,EAAKgB,SAASC,KAAI,SAAAhD,GAAO,OACxB,cAAC,EAAD,CAAcA,QAASA,GAAcA,EAAQsB","file":"static/js/4.45d12aa4.chunk.js","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nfunction Input({ label, labelProps, wrapperClass, onChange, id, ...props }) {\n  return (\n    <div className={`form-group ${wrapperClass ? wrapperClass : \"\"}`}>\n      <label htmlFor={id}>{label}</label>\n      <input className=\"form-control\" id={id} onChange={e => onChange(e.target.value)} {...props} />\n    </div>\n  );\n}\n\nInput.defaultProps = {\n  type: \"text\",\n  onChange: text => console.log(\"Value: \", text)\n};\n\nInput.propTypes = {\n  id: PropTypes.string.isRequired,\n  name: PropTypes.string,\n  label: PropTypes.string.isRequired,\n  labelProps: PropTypes.object,\n  wrapperClass: PropTypes.string,\n  type: PropTypes.oneOf([\"text\", \"password\", \"number\"]),\n  placeholder: PropTypes.string,\n  onChange: PropTypes.func,\n  readonly: PropTypes.bool,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  defaultValue: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  required: PropTypes.bool\n};\n\nexport default Input;\n","import React, { useState } from \"react\";\n\nfunction DownloadItem({ torrent }) {\n  const [stopping, setStopping] = useState(false);\n\n  const stop = () => {\n    setStopping(true);\n\n    try {\n      fetch(`/api/v1/torrent/remove?magnet=${torrent.magnetURI}`);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  return (\n    <div className=\"card\" style={{ opacity: stopping ? 0.75 : 1 }}>\n      <div className=\"card-header compact d-flex space-between\">\n        <h3 style={{ lineBreak: \"anywhere\", marginRight: \"8px\" }}>{torrent.name}</h3>\n        <div className=\"text-400 text-primary\">{torrent.done ? \"Done\" : torrent.redableTimeRemaining}</div>\n      </div>\n      {torrent.progress !== 100 && (\n        <div\n          style={{\n            height: \"4px\",\n            width: `${torrent.progress}%`,\n            backgroundColor: \"var(--primary)\"\n          }}\n        />\n      )}\n      <div className=\"card-body compact\">\n        <div className=\"d-flex space-between\">\n          <div className=\"text-400\">Status: </div>\n          <div>{torrent.status}</div>\n        </div>\n        <div className=\"d-flex space-between\">\n          <div className=\"text-400\">Size: </div>\n          <div>{torrent.total}</div>\n        </div>\n        <div className=\"d-flex space-between\">\n          <div className=\"text-400\">Downloaded: </div>\n          <div>{torrent.downloaded}</div>\n        </div>\n        <div className=\"d-flex space-between\">\n          <div className=\"text-400\">Speed: </div>\n          <div>{torrent.speed}</div>\n        </div>\n        {!torrent.done && (\n          <button disabled={stopping} className=\"btn danger\" onClick={stop}>\n            Stop\n          </button>\n        )}\n        {torrent.done && (\n          <a href={torrent.downloadLink} className=\"btn success\">\n            Open\n          </a>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default DownloadItem;\n","import React, { useState } from \"react\";\nimport useSWR from \"swr\";\nimport Input from \"../components/Input\";\nimport DownloadItem from \"../components/DownloadItem\";\n\nfunction Downloads() {\n  const fetcher = (...args) => fetch(...args).then(res => res.json());\n  const { data, error } = useSWR(\"/api/v1/torrent/list\", fetcher, { refreshInterval: 1000 });\n  const [link, setLink] = useState(\"\");\n  const [adding, setAdding] = useState(false);\n  const [addingError, setAddingError] = useState(\"\");\n\n  const add = async e => {\n    if (e) e.preventDefault();\n    setAdding(true);\n\n    if (link.indexOf(\"magnet:\") !== 0) {\n      setAddingError(\"Link is not a magnet link\");\n    } else {\n      setAddingError(\"\");\n      const resp = await fetch(`/api/v1/torrent/add?magnet=${link}`);\n\n      if (resp.status === 200) {\n        setLink(\"\");\n      } else {\n        setAddingError(\"An error occured\");\n      }\n    }\n\n    setAdding(false);\n  };\n\n  return (\n    <>\n      <h1>Downloads\n        <a className=\"h2\" style={{ paddingLeft: 10 }} href=\"/downloads\">\n          <ion-icon name=\"folder-outline\" />\n        </a>\n      </h1>\n\n      <form onSubmit={add}>\n        <Input\n          id=\"link\"\n          name=\"link\"\n          placeholder=\"magnet:?...\"\n          value={link}\n          onChange={setLink}\n          required\n        />\n        {addingError !== \"\" && <div className=\"text-danger\">{addingError}</div>}\n        <button disabled={adding} className={`btn primary${adding ? \" loading\" : \"\"}`} type=\"submit\">\n          Add\n        </button>\n      </form>\n      {error && <div className=\"text-danger mt-1\">An error occured. Check your internet.</div>}\n      {data && (\n        <div className=\"d-flex-column mt-1\">\n          {data.torrents.map(torrent => (\n            <DownloadItem torrent={torrent} key={torrent.magnetURI} />\n          ))}\n        </div>\n      )}\n    </>\n  );\n}\n\nexport default Downloads;\n"],"sourceRoot":""}