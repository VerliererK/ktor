(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[4],{22:function(e,t,n){"use strict";n.r(t);var a=n(16),c=n(3),s=n(17),r=n.n(s),i=n(1),l=n(19),d=n(20),o=n(21),j=n(0),b=["label","labelProps","wrapperClass","onChange","id"];function h(e){var t=e.label,n=(e.labelProps,e.wrapperClass),a=e.onChange,c=e.id,s=Object(o.a)(e,b);return Object(j.jsxs)("div",{className:"form-group ".concat(n||""),children:[Object(j.jsx)("label",{htmlFor:c,children:t}),Object(j.jsx)("input",Object(d.a)({className:"form-control",id:c,onChange:function(e){return a(e.target.value)}},s))]})}h.defaultProps={type:"text",onChange:function(e){return console.log("Value: ",e)}};var u=h;var x=function(e){var t=e.torrent,n=Object(i.useState)(!1),a=Object(c.a)(n,2),s=a[0],r=a[1];return Object(j.jsxs)("div",{className:"card",style:{opacity:s?.75:1},children:[Object(j.jsxs)("div",{className:"card-header compact d-flex space-between",children:[Object(j.jsx)("h3",{style:{lineBreak:"anywhere",marginRight:"8px"},children:t.name}),Object(j.jsx)("div",{className:"text-400 text-primary",children:t.done?"Done":t.redableTimeRemaining})]}),100!==t.progress&&Object(j.jsx)("div",{style:{height:"4px",width:"".concat(t.progress,"%"),backgroundColor:"var(--primary)"}}),Object(j.jsxs)("div",{className:"card-body compact",children:[Object(j.jsxs)("div",{className:"d-flex space-between",children:[Object(j.jsx)("div",{className:"text-400",children:"Status: "}),Object(j.jsx)("div",{children:t.status})]}),Object(j.jsxs)("div",{className:"d-flex space-between",children:[Object(j.jsx)("div",{className:"text-400",children:"Size: "}),Object(j.jsx)("div",{children:t.total})]}),Object(j.jsxs)("div",{className:"d-flex space-between",children:[Object(j.jsx)("div",{className:"text-400",children:"Downloaded: "}),Object(j.jsx)("div",{children:t.downloaded})]}),Object(j.jsxs)("div",{className:"d-flex space-between",children:[Object(j.jsx)("div",{className:"text-400",children:"Speed: "}),Object(j.jsx)("div",{children:t.speed})]}),!t.done&&Object(j.jsx)("button",{disabled:s,className:"btn danger",onClick:function(){r(!0);try{fetch("/api/v1/torrent/remove?magnet=".concat(t.magnetURI))}catch(e){console.log(e)}},children:"Stop"}),t.done&&Object(j.jsx)("a",{href:t.downloadLink,className:"btn success",children:"Open"})]})]})};t.default=function(){var e=Object(l.a)("/api/v1/torrent/list",(function(){return fetch.apply(void 0,arguments).then((function(e){return e.json()}))}),{refreshInterval:1e3}),t=e.data,n=e.error,s=Object(i.useState)(""),d=Object(c.a)(s,2),o=d[0],b=d[1],h=Object(i.useState)(!1),m=Object(c.a)(h,2),p=m[0],O=m[1],v=Object(i.useState)(""),f=Object(c.a)(v,2),g=f[0],N=f[1],w=function(){var e=Object(a.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),O(!0),0===o.indexOf("magnet:")){e.next=6;break}N("Link is not a magnet link"),e.next=11;break;case 6:return N(""),e.next=9,fetch("/api/v1/torrent/add?magnet=".concat(encodeURIComponent(o)));case 9:200===e.sent.status?b(""):N("An error occured");case 11:O(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("h1",{children:["Downloads",Object(j.jsx)("a",{className:"h2",style:{paddingLeft:10},href:"/downloads",children:Object(j.jsx)("ion-icon",{name:"folder-outline"})})]}),Object(j.jsxs)("form",{onSubmit:w,children:[Object(j.jsx)(u,{id:"link",name:"link",placeholder:"magnet:?...",value:o,onChange:b,required:!0}),""!==g&&Object(j.jsx)("div",{className:"text-danger",children:g}),Object(j.jsx)("button",{disabled:p,className:"btn primary".concat(p?" loading":""),type:"submit",children:"Add"})]}),n&&Object(j.jsx)("div",{className:"text-danger mt-1",children:"An error occured. Check your internet."}),t&&Object(j.jsx)("div",{className:"d-flex-column mt-1",children:t.torrents.map((function(e){return Object(j.jsx)(x,{torrent:e},e.magnetURI)}))})]})}}}]);
//# sourceMappingURL=4.45d12aa4.chunk.js.map